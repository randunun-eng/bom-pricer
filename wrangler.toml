name = "bom-pricer-api"
main = "api/worker.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "bom_pricer"
database_id = "6a3654ab-3daf-4922-acab-150b0ae86aee"

# KV for caching crawl results (6hr TTL)
[[kv_namespaces]]
binding = "CACHE"
id = "232950bfc6ca485783f6af6e47faf2e2"

# Browser Rendering for real JS execution
[browser]
binding = "BROWSER"

# Workers AI for variant parsing
[ai]
binding = "AI"

[triggers]
crons = ["0 */6 * * *"]  # every 6 hours

# Environment variables (set secrets via: wrangler secret put NOVA_INGEST_KEY)
# [vars]
# NOVA_INGEST_KEY = "set-via-wrangler-secret"
